{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar tslib = require('tslib');\n\nvar util = require('@firebase/util');\n\nvar component = require('@firebase/component');\n\nvar logger$1 = require('@firebase/logger');\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar _a;\n\nvar ERRORS = (_a = {}, _a[\"no-app\"\n/* NO_APP */\n] = \"No Firebase App '{$appName}' has been created - \" + 'call Firebase App.initializeApp()', _a[\"bad-app-name\"\n/* BAD_APP_NAME */\n] = \"Illegal App name: '{$appName}\", _a[\"duplicate-app\"\n/* DUPLICATE_APP */\n] = \"Firebase App named '{$appName}' already exists\", _a[\"app-deleted\"\n/* APP_DELETED */\n] = \"Firebase App named '{$appName}' already deleted\", _a[\"invalid-app-argument\"\n/* INVALID_APP_ARGUMENT */\n] = 'firebase.{$appName}() takes either no argument or a ' + 'Firebase App instance.', _a[\"invalid-log-argument\"\n/* INVALID_LOG_ARGUMENT */\n] = 'First argument to `onLog` must be null or a function.', _a);\nvar ERROR_FACTORY = new util.ErrorFactory('app', 'Firebase', ERRORS);\nvar name$1 = \"@firebase/app\";\nvar version = \"0.6.11\";\nvar name$2 = \"@firebase/analytics\";\nvar name$3 = \"@firebase/auth\";\nvar name$4 = \"@firebase/database\";\nvar name$5 = \"@firebase/functions\";\nvar name$6 = \"@firebase/installations\";\nvar name$7 = \"@firebase/messaging\";\nvar name$8 = \"@firebase/performance\";\nvar name$9 = \"@firebase/remote-config\";\nvar name$a = \"@firebase/storage\";\nvar name$b = \"@firebase/firestore\";\nvar name$c = \"firebase-wrapper\";\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar _a$1;\n\nvar DEFAULT_ENTRY_NAME = '[DEFAULT]';\nvar PLATFORM_LOG_STRING = (_a$1 = {}, _a$1[name$1] = 'fire-core', _a$1[name$2] = 'fire-analytics', _a$1[name$3] = 'fire-auth', _a$1[name$4] = 'fire-rtdb', _a$1[name$5] = 'fire-fn', _a$1[name$6] = 'fire-iid', _a$1[name$7] = 'fire-fcm', _a$1[name$8] = 'fire-perf', _a$1[name$9] = 'fire-rc', _a$1[name$a] = 'fire-gcs', _a$1[name$b] = 'fire-fst', _a$1['fire-js'] = 'fire-js', _a$1[name$c] = 'fire-js-all', _a$1);\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar logger = new logger$1.Logger('@firebase/app');\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Global context object for a collection of services using\r\n * a shared authentication state.\r\n */\n\nvar FirebaseAppImpl =\n/** @class */\nfunction () {\n  function FirebaseAppImpl(options, config, firebase_) {\n    var e_1, _a;\n\n    var _this = this;\n\n    this.firebase_ = firebase_;\n    this.isDeleted_ = false;\n    this.name_ = config.name;\n    this.automaticDataCollectionEnabled_ = config.automaticDataCollectionEnabled || false;\n    this.options_ = util.deepCopy(options);\n    this.container = new component.ComponentContainer(config.name); // add itself to container\n\n    this._addComponent(new component.Component('app', function () {\n      return _this;\n    }, \"PUBLIC\"\n    /* PUBLIC */\n    ));\n\n    try {\n      // populate ComponentContainer with existing components\n      for (var _b = tslib.__values(this.firebase_.INTERNAL.components.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var component$1 = _c.value;\n\n        this._addComponent(component$1);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  }\n\n  Object.defineProperty(FirebaseAppImpl.prototype, \"automaticDataCollectionEnabled\", {\n    get: function () {\n      this.checkDestroyed_();\n      return this.automaticDataCollectionEnabled_;\n    },\n    set: function (val) {\n      this.checkDestroyed_();\n      this.automaticDataCollectionEnabled_ = val;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FirebaseAppImpl.prototype, \"name\", {\n    get: function () {\n      this.checkDestroyed_();\n      return this.name_;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FirebaseAppImpl.prototype, \"options\", {\n    get: function () {\n      this.checkDestroyed_();\n      return this.options_;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  FirebaseAppImpl.prototype.delete = function () {\n    var _this = this;\n\n    return new Promise(function (resolve) {\n      _this.checkDestroyed_();\n\n      resolve();\n    }).then(function () {\n      _this.firebase_.INTERNAL.removeApp(_this.name_);\n\n      return Promise.all(_this.container.getProviders().map(function (provider) {\n        return provider.delete();\n      }));\n    }).then(function () {\n      _this.isDeleted_ = true;\n    });\n  };\n  /**\r\n   * Return a service instance associated with this app (creating it\r\n   * on demand), identified by the passed instanceIdentifier.\r\n   *\r\n   * NOTE: Currently storage and functions are the only ones that are leveraging this\r\n   * functionality. They invoke it by calling:\r\n   *\r\n   * ```javascript\r\n   * firebase.app().storage('STORAGE BUCKET ID')\r\n   * ```\r\n   *\r\n   * The service name is passed to this already\r\n   * @internal\r\n   */\n\n\n  FirebaseAppImpl.prototype._getService = function (name, instanceIdentifier) {\n    if (instanceIdentifier === void 0) {\n      instanceIdentifier = DEFAULT_ENTRY_NAME;\n    }\n\n    this.checkDestroyed_(); // getImmediate will always succeed because _getService is only called for registered components.\n\n    return this.container.getProvider(name).getImmediate({\n      identifier: instanceIdentifier\n    });\n  };\n  /**\r\n   * Remove a service instance from the cache, so we will create a new instance for this service\r\n   * when people try to get this service again.\r\n   *\r\n   * NOTE: currently only firestore is using this functionality to support firestore shutdown.\r\n   *\r\n   * @param name The service name\r\n   * @param instanceIdentifier instance identifier in case multiple instances are allowed\r\n   * @internal\r\n   */\n\n\n  FirebaseAppImpl.prototype._removeServiceInstance = function (name, instanceIdentifier) {\n    if (instanceIdentifier === void 0) {\n      instanceIdentifier = DEFAULT_ENTRY_NAME;\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    this.container.getProvider(name).clearInstance(instanceIdentifier);\n  };\n  /**\r\n   * @param component the component being added to this app's container\r\n   */\n\n\n  FirebaseAppImpl.prototype._addComponent = function (component) {\n    try {\n      this.container.addComponent(component);\n    } catch (e) {\n      logger.debug(\"Component \" + component.name + \" failed to register with FirebaseApp \" + this.name, e);\n    }\n  };\n\n  FirebaseAppImpl.prototype._addOrOverwriteComponent = function (component) {\n    this.container.addOrOverwriteComponent(component);\n  };\n  /**\r\n   * This function will throw an Error if the App has already been deleted -\r\n   * use before performing API actions on the App.\r\n   */\n\n\n  FirebaseAppImpl.prototype.checkDestroyed_ = function () {\n    if (this.isDeleted_) {\n      throw ERROR_FACTORY.create(\"app-deleted\"\n      /* APP_DELETED */\n      , {\n        appName: this.name_\n      });\n    }\n  };\n\n  return FirebaseAppImpl;\n}(); // Prevent dead-code elimination of these methods w/o invalid property\n// copying.\n\n\nFirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options || FirebaseAppImpl.prototype.delete || console.log('dc');\nvar version$1 = \"7.20.0\";\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Because auth can't share code with other components, we attach the utility functions\r\n * in an internal namespace to share code.\r\n * This function return a firebase namespace object without\r\n * any utility functions, so it can be shared between the regular firebaseNamespace and\r\n * the lite version.\r\n */\n\nfunction createFirebaseNamespaceCore(firebaseAppImpl) {\n  var apps = {}; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  var components = new Map(); // A namespace is a plain JavaScript Object.\n\n  var namespace = {\n    // Hack to prevent Babel from modifying the object returned\n    // as the firebase namespace.\n    // @ts-ignore\n    __esModule: true,\n    initializeApp: initializeApp,\n    // @ts-ignore\n    app: app,\n    registerVersion: registerVersion,\n    setLogLevel: logger$1.setLogLevel,\n    onLog: onLog,\n    // @ts-ignore\n    apps: null,\n    SDK_VERSION: version$1,\n    INTERNAL: {\n      registerComponent: registerComponent,\n      removeApp: removeApp,\n      components: components,\n      useAsService: useAsService\n    }\n  }; // Inject a circular default export to allow Babel users who were previously\n  // using:\n  //\n  //   import firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase').default;\n  //\n  // instead of\n  //\n  //   import * as firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase');\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  namespace['default'] = namespace; // firebase.apps is a read-only getter.\n\n  Object.defineProperty(namespace, 'apps', {\n    get: getApps\n  });\n  /**\r\n   * Called by App.delete() - but before any services associated with the App\r\n   * are deleted.\r\n   */\n\n  function removeApp(name) {\n    delete apps[name];\n  }\n  /**\r\n   * Get the App object for a given name (or DEFAULT).\r\n   */\n\n\n  function app(name) {\n    name = name || DEFAULT_ENTRY_NAME;\n\n    if (!util.contains(apps, name)) {\n      throw ERROR_FACTORY.create(\"no-app\"\n      /* NO_APP */\n      , {\n        appName: name\n      });\n    }\n\n    return apps[name];\n  } // @ts-ignore\n\n\n  app['App'] = firebaseAppImpl;\n\n  function initializeApp(options, rawConfig) {\n    if (rawConfig === void 0) {\n      rawConfig = {};\n    }\n\n    if (typeof rawConfig !== 'object' || rawConfig === null) {\n      var name_1 = rawConfig;\n      rawConfig = {\n        name: name_1\n      };\n    }\n\n    var config = rawConfig;\n\n    if (config.name === undefined) {\n      config.name = DEFAULT_ENTRY_NAME;\n    }\n\n    var name = config.name;\n\n    if (typeof name !== 'string' || !name) {\n      throw ERROR_FACTORY.create(\"bad-app-name\"\n      /* BAD_APP_NAME */\n      , {\n        appName: String(name)\n      });\n    }\n\n    if (util.contains(apps, name)) {\n      throw ERROR_FACTORY.create(\"duplicate-app\"\n      /* DUPLICATE_APP */\n      , {\n        appName: name\n      });\n    }\n\n    var app = new firebaseAppImpl(options, config, namespace);\n    apps[name] = app;\n    return app;\n  }\n  /*\r\n   * Return an array of all the non-deleted FirebaseApps.\r\n   */\n\n\n  function getApps() {\n    // Make a copy so caller cannot mutate the apps list.\n    return Object.keys(apps).map(function (name) {\n      return apps[name];\n    });\n  }\n\n  function registerComponent(component) {\n    var e_1, _a;\n\n    var componentName = component.name;\n\n    if (components.has(componentName)) {\n      logger.debug(\"There were multiple attempts to register component \" + componentName + \".\");\n      return component.type === \"PUBLIC\"\n      /* PUBLIC */\n      ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      namespace[componentName] : null;\n    }\n\n    components.set(componentName, component); // create service namespace for public components\n\n    if (component.type === \"PUBLIC\"\n    /* PUBLIC */\n    ) {\n      // The Service namespace is an accessor function ...\n      var serviceNamespace = function (appArg) {\n        if (appArg === void 0) {\n          appArg = app();\n        } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n        if (typeof appArg[componentName] !== 'function') {\n          // Invalid argument.\n          // This happens in the following case: firebase.storage('gs:/')\n          throw ERROR_FACTORY.create(\"invalid-app-argument\"\n          /* INVALID_APP_ARGUMENT */\n          , {\n            appName: componentName\n          });\n        } // Forward service instance lookup to the FirebaseApp.\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n        return appArg[componentName]();\n      }; // ... and a container for service-level properties.\n\n\n      if (component.serviceProps !== undefined) {\n        util.deepExtend(serviceNamespace, component.serviceProps);\n      } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n      namespace[componentName] = serviceNamespace; // Patch the FirebaseAppImpl prototype\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      firebaseAppImpl.prototype[componentName] = // TODO: The eslint disable can be removed and the 'ignoreRestArgs'\n      // option added to the no-explicit-any rule when ESlint releases it.\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var serviceFxn = this._getService.bind(this, componentName);\n\n        return serviceFxn.apply(this, component.multipleInstances ? args : []);\n      };\n    }\n\n    try {\n      // add the component to existing app instances\n      for (var _b = tslib.__values(Object.keys(apps)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var appName = _c.value;\n\n        apps[appName]._addComponent(component);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    return component.type === \"PUBLIC\"\n    /* PUBLIC */\n    ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    namespace[componentName] : null;\n  }\n\n  function registerVersion(libraryKeyOrName, version, variant) {\n    var _a; // TODO: We can use this check to whitelist strings when/if we set up\n    // a good whitelist system.\n\n\n    var library = (_a = PLATFORM_LOG_STRING[libraryKeyOrName]) !== null && _a !== void 0 ? _a : libraryKeyOrName;\n\n    if (variant) {\n      library += \"-\" + variant;\n    }\n\n    var libraryMismatch = library.match(/\\s|\\//);\n    var versionMismatch = version.match(/\\s|\\//);\n\n    if (libraryMismatch || versionMismatch) {\n      var warning = [\"Unable to register library \\\"\" + library + \"\\\" with version \\\"\" + version + \"\\\":\"];\n\n      if (libraryMismatch) {\n        warning.push(\"library name \\\"\" + library + \"\\\" contains illegal characters (whitespace or \\\"/\\\")\");\n      }\n\n      if (libraryMismatch && versionMismatch) {\n        warning.push('and');\n      }\n\n      if (versionMismatch) {\n        warning.push(\"version name \\\"\" + version + \"\\\" contains illegal characters (whitespace or \\\"/\\\")\");\n      }\n\n      logger.warn(warning.join(' '));\n      return;\n    }\n\n    registerComponent(new component.Component(library + \"-version\", function () {\n      return {\n        library: library,\n        version: version\n      };\n    }, \"VERSION\"\n    /* VERSION */\n    ));\n  }\n\n  function onLog(logCallback, options) {\n    if (logCallback !== null && typeof logCallback !== 'function') {\n      throw ERROR_FACTORY.create(\"invalid-log-argument\"\n      /* INVALID_LOG_ARGUMENT */\n      , {\n        appName: name\n      });\n    }\n\n    logger$1.setUserLogHandler(logCallback, options);\n  } // Map the requested service to a registered service name\n  // (used to map auth to serverAuth service when needed).\n\n\n  function useAsService(app, name) {\n    if (name === 'serverAuth') {\n      return null;\n    }\n\n    var useService = name;\n    return useService;\n  }\n\n  return namespace;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Return a firebase namespace object.\r\n *\r\n * In production, this will be called exactly once and the result\r\n * assigned to the 'firebase' global.  It may be called multiple times\r\n * in unit tests.\r\n */\n\n\nfunction createFirebaseNamespace() {\n  var namespace = createFirebaseNamespaceCore(FirebaseAppImpl);\n  namespace.INTERNAL = tslib.__assign(tslib.__assign({}, namespace.INTERNAL), {\n    createFirebaseNamespace: createFirebaseNamespace,\n    extendNamespace: extendNamespace,\n    createSubscribe: util.createSubscribe,\n    ErrorFactory: util.ErrorFactory,\n    deepExtend: util.deepExtend\n  });\n  /**\r\n   * Patch the top-level firebase namespace with additional properties.\r\n   *\r\n   * firebase.INTERNAL.extendNamespace()\r\n   */\n\n  function extendNamespace(props) {\n    util.deepExtend(namespace, props);\n  }\n\n  return namespace;\n}\n\nvar firebase = createFirebaseNamespace();\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar PlatformLoggerService =\n/** @class */\nfunction () {\n  function PlatformLoggerService(container) {\n    this.container = container;\n  } // In initial implementation, this will be called by installations on\n  // auth token refresh, and installations will send this string.\n\n\n  PlatformLoggerService.prototype.getPlatformInfoString = function () {\n    var providers = this.container.getProviders(); // Loop through providers and get library/version pairs from any that are\n    // version components.\n\n    return providers.map(function (provider) {\n      if (isVersionServiceProvider(provider)) {\n        var service = provider.getImmediate();\n        return service.library + \"/\" + service.version;\n      } else {\n        return null;\n      }\n    }).filter(function (logString) {\n      return logString;\n    }).join(' ');\n  };\n\n  return PlatformLoggerService;\n}();\n/**\r\n *\r\n * @param provider check if this provider provides a VersionService\r\n *\r\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\r\n * provides VersionService. The provider is not necessarily a 'app-version'\r\n * provider.\r\n */\n\n\nfunction isVersionServiceProvider(provider) {\n  var component = provider.getComponent();\n  return (component === null || component === void 0 ? void 0 : component.type) === \"VERSION\"\n  /* VERSION */\n  ;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction registerCoreComponents(firebase, variant) {\n  firebase.INTERNAL.registerComponent(new component.Component('platform-logger', function (container) {\n    return new PlatformLoggerService(container);\n  }, \"PRIVATE\"\n  /* PRIVATE */\n  )); // Register `app` package.\n\n  firebase.registerVersion(name$1, version, variant); // Register platform SDK identifier (no version).\n\n  firebase.registerVersion('fire-js', '');\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n// Firebase Lite detection test\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nif (util.isBrowser() && self.firebase !== undefined) {\n  logger.warn(\"\\n    Warning: Firebase is already defined in the global scope. Please make sure\\n    Firebase library is only loaded once.\\n  \"); // eslint-disable-next-line\n\n  var sdkVersion = self.firebase.SDK_VERSION;\n\n  if (sdkVersion && sdkVersion.indexOf('LITE') >= 0) {\n    logger.warn(\"\\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\\n    \");\n  }\n}\n\nvar initializeApp = firebase.initializeApp; // TODO: This disable can be removed and the 'ignoreRestArgs' option added to\n// the no-explicit-any rule when ESlint releases it.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfirebase.initializeApp = function () {\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  } // Environment check before initializing app\n  // Do the check in initializeApp, so people have a chance to disable it by setting logLevel\n  // in @firebase/logger\n\n\n  if (util.isNode()) {\n    logger.warn(\"\\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\\n      run in a Node environment.  If running in a Node environment, make sure you\\n      are using the bundle specified by the \\\"main\\\" field in package.json.\\n      \\n      If you are using Webpack, you can specify \\\"main\\\" as the first item in\\n      \\\"resolve.mainFields\\\":\\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\\n      \\n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify \\\"main\\\"\\n      as the first item in \\\"mainFields\\\", e.g. ['main', 'module'].\\n      https://github.com/rollup/rollup-plugin-node-resolve\\n      \");\n  }\n\n  return initializeApp.apply(undefined, args);\n};\n\nvar firebase$1 = firebase;\nregisterCoreComponents(firebase$1);\nexports.default = firebase$1;\nexports.firebase = firebase$1;","map":{"version":3,"mappings":"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","names":["ERRORS","_a","ERROR_FACTORY","ErrorFactory","DEFAULT_ENTRY_NAME","PLATFORM_LOG_STRING","appName","analyticsName","authName","databaseName","functionsName","installationsName","messagingName","performanceName","remoteConfigName","storageName","firestoreName","packageName","logger","Logger","options","config","firebase_","name_","name","automaticDataCollectionEnabled_","automaticDataCollectionEnabled","options_","deepCopy","container","ComponentContainer","_addComponent","Component","INTERNAL","components","values","_c","component","Object","FirebaseAppImpl","checkDestroyed_","val","Promise","_this","resolve","then","removeApp","all","getProviders","map","delete","isDeleted_","instanceIdentifier","getProvider","getImmediate","identifier","clearInstance","addComponent","e","debug","addOrOverwriteComponent","create","prototype","console","log","createFirebaseNamespaceCore","firebaseAppImpl","apps","Map","namespace","__esModule","initializeApp","app","registerVersion","setLogLevel","onLog","SDK_VERSION","version","registerComponent","useAsService","defineProperty","get","getApps","contains","rawConfig","name_1","undefined","String","keys","componentName","has","type","set","serviceNamespace","appArg","serviceProps","deepExtend","args","serviceFxn","_getService","bind","apply","multipleInstances","libraryKeyOrName","variant","library","libraryMismatch","match","versionMismatch","warning","push","warn","join","logCallback","setUserLogHandler","useService","createFirebaseNamespace","tslib","extendNamespace","createSubscribe","props","firebase","PlatformLoggerService","providers","isVersionServiceProvider","provider","service","filter","getComponent","registerCoreComponents","isBrowser","self","sdkVersion","indexOf","firebaseNamespace","isNode"],"sources":["../src/errors.ts","../src/constants.ts","../src/logger.ts","../src/firebaseApp.ts","../src/firebaseNamespaceCore.ts","../src/firebaseNamespace.ts","../src/platformLoggerService.ts","../src/registerCoreComponents.ts","../index.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nexport const enum AppError {\n  NO_APP = 'no-app',\n  BAD_APP_NAME = 'bad-app-name',\n  DUPLICATE_APP = 'duplicate-app',\n  APP_DELETED = 'app-deleted',\n  INVALID_APP_ARGUMENT = 'invalid-app-argument',\n  INVALID_LOG_ARGUMENT = 'invalid-log-argument'\n}\n\nconst ERRORS: ErrorMap<AppError> = {\n  [AppError.NO_APP]:\n    \"No Firebase App '{$appName}' has been created - \" +\n    'call Firebase App.initializeApp()',\n  [AppError.BAD_APP_NAME]: \"Illegal App name: '{$appName}\",\n  [AppError.DUPLICATE_APP]: \"Firebase App named '{$appName}' already exists\",\n  [AppError.APP_DELETED]: \"Firebase App named '{$appName}' already deleted\",\n  [AppError.INVALID_APP_ARGUMENT]:\n    'firebase.{$appName}() takes either no argument or a ' +\n    'Firebase App instance.',\n  [AppError.INVALID_LOG_ARGUMENT]:\n    'First argument to `onLog` must be null or a function.'\n};\n\ntype ErrorParams = { [key in AppError]: { appName: string } };\n\nexport const ERROR_FACTORY = new ErrorFactory<AppError, ErrorParams>(\n  'app',\n  'Firebase',\n  ERRORS\n);\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\nimport { name as appName } from '../package.json';\nimport { name as analyticsName } from '../../analytics/package.json';\nimport { name as authName } from '../../auth/package.json';\nimport { name as databaseName } from '../../database/package.json';\nimport { name as functionsName } from '../../functions/package.json';\nimport { name as installationsName } from '../../installations/package.json';\nimport { name as messagingName } from '../../messaging/package.json';\nimport { name as performanceName } from '../../performance/package.json';\nimport { name as remoteConfigName } from '../../remote-config/package.json';\nimport { name as storageName } from '../../storage/package.json';\nimport { name as firestoreName } from '../../firestore/package.json';\nimport { name as packageName } from '../../../package.json';\n\nexport const PLATFORM_LOG_STRING = {\n  [appName]: 'fire-core',\n  [analyticsName]: 'fire-analytics',\n  [authName]: 'fire-auth',\n  [databaseName]: 'fire-rtdb',\n  [functionsName]: 'fire-fn',\n  [installationsName]: 'fire-iid',\n  [messagingName]: 'fire-fcm',\n  [performanceName]: 'fire-perf',\n  [remoteConfigName]: 'fire-rc',\n  [storageName]: 'fire-gcs',\n  [firestoreName]: 'fire-fst',\n  'fire-js': 'fire-js', // Platform identifier for JS SDK.\n  [packageName]: 'fire-js-all'\n} as const;\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Logger } from '@firebase/logger';\n\nexport const logger = new Logger('@firebase/app');\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppConfig\n} from '@firebase/app-types';\nimport {\n  _FirebaseApp,\n  _FirebaseNamespace,\n  FirebaseService\n} from '@firebase/app-types/private';\nimport { deepCopy } from '@firebase/util';\nimport {\n  ComponentContainer,\n  Component,\n  ComponentType,\n  Name\n} from '@firebase/component';\nimport { AppError, ERROR_FACTORY } from './errors';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { logger } from './logger';\n\n/**\n * Global context object for a collection of services using\n * a shared authentication state.\n */\nexport class FirebaseAppImpl implements FirebaseApp {\n  private readonly options_: FirebaseOptions;\n  private readonly name_: string;\n  private isDeleted_ = false;\n  private automaticDataCollectionEnabled_: boolean;\n  private container: ComponentContainer;\n\n  constructor(\n    options: FirebaseOptions,\n    config: FirebaseAppConfig,\n    private readonly firebase_: _FirebaseNamespace\n  ) {\n    this.name_ = config.name!;\n    this.automaticDataCollectionEnabled_ =\n      config.automaticDataCollectionEnabled || false;\n    this.options_ = deepCopy<FirebaseOptions>(options);\n    this.container = new ComponentContainer(config.name!);\n\n    // add itself to container\n    this._addComponent(new Component('app', () => this, ComponentType.PUBLIC));\n    // populate ComponentContainer with existing components\n    for (const component of this.firebase_.INTERNAL.components.values()) {\n      this._addComponent(component);\n    }\n  }\n\n  get automaticDataCollectionEnabled(): boolean {\n    this.checkDestroyed_();\n    return this.automaticDataCollectionEnabled_;\n  }\n\n  set automaticDataCollectionEnabled(val) {\n    this.checkDestroyed_();\n    this.automaticDataCollectionEnabled_ = val;\n  }\n\n  get name(): string {\n    this.checkDestroyed_();\n    return this.name_;\n  }\n\n  get options(): FirebaseOptions {\n    this.checkDestroyed_();\n    return this.options_;\n  }\n\n  delete(): Promise<void> {\n    return new Promise(resolve => {\n      this.checkDestroyed_();\n      resolve();\n    })\n      .then(() => {\n        this.firebase_.INTERNAL.removeApp(this.name_);\n\n        return Promise.all(\n          this.container.getProviders().map(provider => provider.delete())\n        );\n      })\n      .then((): void => {\n        this.isDeleted_ = true;\n      });\n  }\n\n  /**\n   * Return a service instance associated with this app (creating it\n   * on demand), identified by the passed instanceIdentifier.\n   *\n   * NOTE: Currently storage and functions are the only ones that are leveraging this\n   * functionality. They invoke it by calling:\n   *\n   * ```javascript\n   * firebase.app().storage('STORAGE BUCKET ID')\n   * ```\n   *\n   * The service name is passed to this already\n   * @internal\n   */\n  _getService(\n    name: string,\n    instanceIdentifier: string = DEFAULT_ENTRY_NAME\n  ): FirebaseService {\n    this.checkDestroyed_();\n\n    // getImmediate will always succeed because _getService is only called for registered components.\n    return (this.container.getProvider(name as Name).getImmediate({\n      identifier: instanceIdentifier\n    }) as unknown) as FirebaseService;\n  }\n  /**\n   * Remove a service instance from the cache, so we will create a new instance for this service\n   * when people try to get this service again.\n   *\n   * NOTE: currently only firestore is using this functionality to support firestore shutdown.\n   *\n   * @param name The service name\n   * @param instanceIdentifier instance identifier in case multiple instances are allowed\n   * @internal\n   */\n  _removeServiceInstance(\n    name: string,\n    instanceIdentifier: string = DEFAULT_ENTRY_NAME\n  ): void {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.container.getProvider(name as any).clearInstance(instanceIdentifier);\n  }\n\n  /**\n   * @param component the component being added to this app's container\n   */\n  _addComponent(component: Component): void {\n    try {\n      this.container.addComponent(component);\n    } catch (e) {\n      logger.debug(\n        `Component ${component.name} failed to register with FirebaseApp ${this.name}`,\n        e\n      );\n    }\n  }\n\n  _addOrOverwriteComponent(component: Component): void {\n    this.container.addOrOverwriteComponent(component);\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  private checkDestroyed_(): void {\n    if (this.isDeleted_) {\n      throw ERROR_FACTORY.create(AppError.APP_DELETED, { appName: this.name_ });\n    }\n  }\n}\n\n// Prevent dead-code elimination of these methods w/o invalid property\n// copying.\n(FirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options) ||\n  FirebaseAppImpl.prototype.delete ||\n  console.log('dc');\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseNamespace,\n  FirebaseAppConfig\n} from '@firebase/app-types';\nimport {\n  _FirebaseApp,\n  _FirebaseNamespace,\n  FirebaseService,\n  FirebaseServiceNamespace\n} from '@firebase/app-types/private';\nimport { deepExtend, contains } from '@firebase/util';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { ERROR_FACTORY, AppError } from './errors';\nimport { FirebaseAppLiteImpl } from './lite/firebaseAppLite';\nimport { DEFAULT_ENTRY_NAME, PLATFORM_LOG_STRING } from './constants';\nimport { version } from '../../firebase/package.json';\nimport { logger } from './logger';\nimport {\n  setUserLogHandler,\n  setLogLevel,\n  LogCallback,\n  LogOptions\n} from '@firebase/logger';\nimport { Component, ComponentType, Name } from '@firebase/component';\n\n/**\n * Because auth can't share code with other components, we attach the utility functions\n * in an internal namespace to share code.\n * This function return a firebase namespace object without\n * any utility functions, so it can be shared between the regular firebaseNamespace and\n * the lite version.\n */\nexport function createFirebaseNamespaceCore(\n  firebaseAppImpl: typeof FirebaseAppImpl | typeof FirebaseAppLiteImpl\n): FirebaseNamespace {\n  const apps: { [name: string]: FirebaseApp } = {};\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const components = new Map<string, Component<any>>();\n\n  // A namespace is a plain JavaScript Object.\n  const namespace: FirebaseNamespace = {\n    // Hack to prevent Babel from modifying the object returned\n    // as the firebase namespace.\n    // @ts-ignore\n    __esModule: true,\n    initializeApp,\n    // @ts-ignore\n    app,\n    registerVersion,\n    setLogLevel,\n    onLog,\n    // @ts-ignore\n    apps: null,\n    SDK_VERSION: version,\n    INTERNAL: {\n      registerComponent,\n      removeApp,\n      components,\n      useAsService\n    }\n  };\n\n  // Inject a circular default export to allow Babel users who were previously\n  // using:\n  //\n  //   import firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase').default;\n  //\n  // instead of\n  //\n  //   import * as firebase from 'firebase';\n  //   which becomes: var firebase = require('firebase');\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (namespace as any)['default'] = namespace;\n\n  // firebase.apps is a read-only getter.\n  Object.defineProperty(namespace, 'apps', {\n    get: getApps\n  });\n\n  /**\n   * Called by App.delete() - but before any services associated with the App\n   * are deleted.\n   */\n  function removeApp(name: string): void {\n    delete apps[name];\n  }\n\n  /**\n   * Get the App object for a given name (or DEFAULT).\n   */\n  function app(name?: string): FirebaseApp {\n    name = name || DEFAULT_ENTRY_NAME;\n    if (!contains(apps, name)) {\n      throw ERROR_FACTORY.create(AppError.NO_APP, { appName: name });\n    }\n    return apps[name];\n  }\n\n  // @ts-ignore\n  app['App'] = firebaseAppImpl;\n  /**\n   * Create a new App instance (name must be unique).\n   */\n  function initializeApp(\n    options: FirebaseOptions,\n    config?: FirebaseAppConfig\n  ): FirebaseApp;\n  function initializeApp(options: FirebaseOptions, name?: string): FirebaseApp;\n  function initializeApp(\n    options: FirebaseOptions,\n    rawConfig = {}\n  ): FirebaseApp {\n    if (typeof rawConfig !== 'object' || rawConfig === null) {\n      const name = rawConfig;\n      rawConfig = { name };\n    }\n\n    const config = rawConfig as FirebaseAppConfig;\n\n    if (config.name === undefined) {\n      config.name = DEFAULT_ENTRY_NAME;\n    }\n\n    const { name } = config;\n\n    if (typeof name !== 'string' || !name) {\n      throw ERROR_FACTORY.create(AppError.BAD_APP_NAME, {\n        appName: String(name)\n      });\n    }\n\n    if (contains(apps, name)) {\n      throw ERROR_FACTORY.create(AppError.DUPLICATE_APP, { appName: name });\n    }\n\n    const app = new firebaseAppImpl(\n      options,\n      config,\n      namespace as _FirebaseNamespace\n    );\n\n    apps[name] = app;\n\n    return app;\n  }\n\n  /*\n   * Return an array of all the non-deleted FirebaseApps.\n   */\n  function getApps(): FirebaseApp[] {\n    // Make a copy so caller cannot mutate the apps list.\n    return Object.keys(apps).map(name => apps[name]);\n  }\n\n  function registerComponent(\n    component: Component\n  ): FirebaseServiceNamespace<FirebaseService> | null {\n    const componentName = component.name;\n    if (components.has(componentName)) {\n      logger.debug(\n        `There were multiple attempts to register component ${componentName}.`\n      );\n\n      return component.type === ComponentType.PUBLIC\n        ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (namespace as any)[componentName]\n        : null;\n    }\n\n    components.set(componentName, component);\n\n    // create service namespace for public components\n    if (component.type === ComponentType.PUBLIC) {\n      // The Service namespace is an accessor function ...\n      const serviceNamespace = (\n        appArg: FirebaseApp = app()\n      ): FirebaseService => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (typeof (appArg as any)[componentName] !== 'function') {\n          // Invalid argument.\n          // This happens in the following case: firebase.storage('gs:/')\n          throw ERROR_FACTORY.create(AppError.INVALID_APP_ARGUMENT, {\n            appName: componentName\n          });\n        }\n\n        // Forward service instance lookup to the FirebaseApp.\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return (appArg as any)[componentName]();\n      };\n\n      // ... and a container for service-level properties.\n      if (component.serviceProps !== undefined) {\n        deepExtend(serviceNamespace, component.serviceProps);\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (namespace as any)[componentName] = serviceNamespace;\n\n      // Patch the FirebaseAppImpl prototype\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (firebaseAppImpl.prototype as any)[componentName] =\n        // TODO: The eslint disable can be removed and the 'ignoreRestArgs'\n        // option added to the no-explicit-any rule when ESlint releases it.\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        function (...args: any) {\n          const serviceFxn = this._getService.bind(this, componentName);\n          return serviceFxn.apply(\n            this,\n            component.multipleInstances ? args : []\n          );\n        };\n    }\n\n    // add the component to existing app instances\n    for (const appName of Object.keys(apps)) {\n      (apps[appName] as _FirebaseApp)._addComponent(component);\n    }\n\n    return component.type === ComponentType.PUBLIC\n      ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (namespace as any)[componentName]\n      : null;\n  }\n\n  function registerVersion(\n    libraryKeyOrName: string,\n    version: string,\n    variant?: string\n  ): void {\n    // TODO: We can use this check to whitelist strings when/if we set up\n    // a good whitelist system.\n    let library = PLATFORM_LOG_STRING[libraryKeyOrName] ?? libraryKeyOrName;\n    if (variant) {\n      library += `-${variant}`;\n    }\n    const libraryMismatch = library.match(/\\s|\\//);\n    const versionMismatch = version.match(/\\s|\\//);\n    if (libraryMismatch || versionMismatch) {\n      const warning = [\n        `Unable to register library \"${library}\" with version \"${version}\":`\n      ];\n      if (libraryMismatch) {\n        warning.push(\n          `library name \"${library}\" contains illegal characters (whitespace or \"/\")`\n        );\n      }\n      if (libraryMismatch && versionMismatch) {\n        warning.push('and');\n      }\n      if (versionMismatch) {\n        warning.push(\n          `version name \"${version}\" contains illegal characters (whitespace or \"/\")`\n        );\n      }\n      logger.warn(warning.join(' '));\n      return;\n    }\n    registerComponent(\n      new Component(\n        `${library}-version` as Name,\n        () => ({ library, version }),\n        ComponentType.VERSION\n      )\n    );\n  }\n\n  function onLog(logCallback: LogCallback | null, options?: LogOptions): void {\n    if (logCallback !== null && typeof logCallback !== 'function') {\n      throw ERROR_FACTORY.create(AppError.INVALID_LOG_ARGUMENT, {\n        appName: name\n      });\n    }\n    setUserLogHandler(logCallback, options);\n  }\n\n  // Map the requested service to a registered service name\n  // (used to map auth to serverAuth service when needed).\n  function useAsService(app: FirebaseApp, name: string): string | null {\n    if (name === 'serverAuth') {\n      return null;\n    }\n\n    const useService = name;\n\n    return useService;\n  }\n\n  return namespace;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { _FirebaseApp, _FirebaseNamespace } from '@firebase/app-types/private';\nimport { createSubscribe, deepExtend, ErrorFactory } from '@firebase/util';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { createFirebaseNamespaceCore } from './firebaseNamespaceCore';\n\n/**\n * Return a firebase namespace object.\n *\n * In production, this will be called exactly once and the result\n * assigned to the 'firebase' global.  It may be called multiple times\n * in unit tests.\n */\nexport function createFirebaseNamespace(): FirebaseNamespace {\n  const namespace = createFirebaseNamespaceCore(FirebaseAppImpl);\n  (namespace as _FirebaseNamespace).INTERNAL = {\n    ...(namespace as _FirebaseNamespace).INTERNAL,\n    createFirebaseNamespace,\n    extendNamespace,\n    createSubscribe,\n    ErrorFactory,\n    deepExtend\n  };\n\n  /**\n   * Patch the top-level firebase namespace with additional properties.\n   *\n   * firebase.INTERNAL.extendNamespace()\n   */\n  function extendNamespace(props: { [prop: string]: unknown }): void {\n    deepExtend(namespace, props);\n  }\n\n  return namespace;\n}\n\nexport const firebase = createFirebaseNamespace();\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ComponentContainer,\n  ComponentType,\n  Provider,\n  Name\n} from '@firebase/component';\n\nexport class PlatformLoggerService {\n  constructor(private readonly container: ComponentContainer) {}\n  // In initial implementation, this will be called by installations on\n  // auth token refresh, and installations will send this string.\n  getPlatformInfoString(): string {\n    const providers = this.container.getProviders();\n    // Loop through providers and get library/version pairs from any that are\n    // version components.\n    return providers\n      .map(provider => {\n        if (isVersionServiceProvider(provider)) {\n          const service = provider.getImmediate();\n          return `${service.library}/${service.version}`;\n        } else {\n          return null;\n        }\n      })\n      .filter(logString => logString)\n      .join(' ');\n  }\n}\n/**\n *\n * @param provider check if this provider provides a VersionService\n *\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\n * provides VersionService. The provider is not necessarily a 'app-version'\n * provider.\n */\nfunction isVersionServiceProvider(\n  provider: Provider<Name>\n): provider is Provider<'app-version'> {\n  const component = provider.getComponent();\n  return component?.type === ComponentType.VERSION;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { _FirebaseNamespace } from '@firebase/app-types/private';\nimport { Component, ComponentType } from '@firebase/component';\nimport { PlatformLoggerService } from './platformLoggerService';\nimport { name, version } from '../package.json';\n\nexport function registerCoreComponents(\n  firebase: FirebaseNamespace,\n  variant?: string\n): void {\n  (firebase as _FirebaseNamespace).INTERNAL.registerComponent(\n    new Component(\n      'platform-logger',\n      container => new PlatformLoggerService(container),\n      ComponentType.PRIVATE\n    )\n  );\n  // Register `app` package.\n  firebase.registerVersion(name, version, variant);\n  // Register platform SDK identifier (no version).\n  firebase.registerVersion('fire-js', '');\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseNamespace } from '@firebase/app-types';\nimport { firebase as firebaseNamespace } from './src/firebaseNamespace';\nimport { isNode, isBrowser } from '@firebase/util';\nimport { logger } from './src/logger';\nimport { registerCoreComponents } from './src/registerCoreComponents';\n\n// Firebase Lite detection test\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nif (isBrowser() && (self as any).firebase !== undefined) {\n  logger.warn(`\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  `);\n\n  // eslint-disable-next-line\n  const sdkVersion = ((self as any).firebase as FirebaseNamespace).SDK_VERSION;\n  if (sdkVersion && sdkVersion.indexOf('LITE') >= 0) {\n    logger.warn(`\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    `);\n  }\n}\n\nconst initializeApp = firebaseNamespace.initializeApp;\n\n// TODO: This disable can be removed and the 'ignoreRestArgs' option added to\n// the no-explicit-any rule when ESlint releases it.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfirebaseNamespace.initializeApp = function (...args: any) {\n  // Environment check before initializing app\n  // Do the check in initializeApp, so people have a chance to disable it by setting logLevel\n  // in @firebase/logger\n  if (isNode()) {\n    logger.warn(`\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the \"main\" field in package.json.\n      \n      If you are using Webpack, you can specify \"main\" as the first item in\n      \"resolve.mainFields\":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify \"main\"\n      as the first item in \"mainFields\", e.g. ['main', 'module'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      `);\n  }\n  return initializeApp.apply(undefined, args);\n};\n\nexport const firebase = firebaseNamespace;\n\nregisterCoreComponents(firebase);\n\n// eslint-disable-next-line import/no-default-export\nexport default firebase;\n"]},"metadata":{},"sourceType":"script"}